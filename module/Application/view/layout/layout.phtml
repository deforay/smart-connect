<?php

use Laminas\Session\Container;

$container = new Container('alert');
$loginContainer = new Container('credo');
$languagecontainer = new Container('language');
$config = $this->GetConfigData();
$activeModule = $this->GetActiveModules();
$languagecontainer->locale = $this->GetLocaleData('locale', $config['language']);

if (!isset($activeTab)) {
    $activeTab = '';
}

?>
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->

<head>
    <meta charset="utf-8" />
    <title><?php echo $this->translate('Smart Connect'); ?> | <?php echo $this->translate('Dashboard for Enhancement of VL Treatment Cascade'); ?></title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="<?php echo $this->basePath('assets/global/css/google-fonts.css'); ?>" rel="stylesheet" type="text/css" />
    <link href="<?php echo $this->basePath('assets/global/plugins/font-awesome/css/font-awesome.min.css'); ?>" rel="stylesheet" type="text/css" />
    <link href="<?php echo $this->basePath('assets/global/plugins/simple-line-icons/simple-line-icons.min.css'); ?>" rel="stylesheet" type="text/css" />
    <link href="<?php echo $this->basePath('assets/global/plugins/bootstrap/css/bootstrap.min.css'); ?>" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="<?php echo $this->basePath() . '/assets/global/css/deforayModal.css'; ?>">

    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <link href="<?php echo $this->basePath('assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.css'); ?>" rel="stylesheet" type="text/css" />

    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN THEME GLOBAL STYLES -->
    <link href="<?php echo $this->basePath('assets/global/css/components-rounded.min.css'); ?>" rel="stylesheet" id="style_components" type="text/css" />
    <link href="<?php echo $this->basePath('assets/global/css/plugins.min.css'); ?>" rel="stylesheet" type="text/css" />
    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <link href="<?php echo $this->basePath('assets/layouts/layout/css/layout.min.css'); ?>" rel="stylesheet" type="text/css" />
    <link href="<?php echo $this->basePath('assets/layouts/layout/css/themes/blue.min.css'); ?>" rel="stylesheet" type="text/css" id="style_color" />


    <link href="<?php echo $this->basePath('assets/global/plugins/select2/css/select2.min.css'); ?>" rel="stylesheet" type="text/css" />
    <link href="<?php echo $this->basePath('assets/global/css/highcharts.css'); ?>" rel="stylesheet" type="text/css" />
    <link href="<?php echo $this->basePath('assets/bootstrap-toggle/bootstrap-toggle.min.css'); ?>" rel="stylesheet">
    <link href="<?php echo $this->basePath('assets/pages/css/status-indicator.css'); ?>" rel="stylesheet">

    <link href="https://cdn.datatables.net/v/bs/jszip-3.10.1/dt-1.13.8/af-2.6.0/b-2.4.2/b-colvis-2.4.2/b-html5-2.4.2/b-print-2.4.2/cr-1.7.0/fc-4.3.0/fh-3.4.0/r-2.5.0/rr-1.4.1/sc-2.3.0/datatables.min.css" rel="stylesheet">

    <style>
        <?php if ($activeTab != 'duplicate-data') { ?>table.dataTable td.sorting_1,
        table.dataTable td.sorting_2,
        table.dataTable td.sorting_3,
        table.dataTable th.sorting_1,
        table.dataTable th.sorting_2,
        table.dataTable th.sorting_3 {
            background: #fbfcfd !important
        }

        <?php }

        if (isset($loginContainer->useCurrentTables) && $loginContainer->useCurrentTables == true) { ?>body,
        .nav-item,
        .page-header.navbar,
        .portlet.blue,
        .page-sidebar.navbar-collapse.collapse,
        .page-sidebar-menu.page-header-fixed.page-sidebar-menu-light.page-sidebar-menu-closed {
            background-image: url('/assets/img/patterns/blue-pattern.png');
        }

        <?php } ?>.resize-page-logo {
            width: auto !important;
        }

        .manage-logo-default {
            margin-top: 8px !important;
        }

        .hide-default-text {
            display: none;
        }

        .scroll-to-top>i {
            color: #ff7a7a !important;
        }

        .toggle.btn.btn-primary,
        .toggle.btn.btn-default.off {
            margin: auto;
            width: 50%;
            display: block;
        }
    </style>
    <!-- END THEME LAYOUT STYLES -->
    <link rel="shortcut icon" href="/favicon.ico" />

    <script src="<?php echo $this->basePath('assets/global/plugins/jquery.min.js'); ?>" type="text/javascript"></script>
</head>
<!-- END HEAD -->

<body class="page-header-fixed page-container-bg-solid page-content-white page-sidebar-closed">
    <!-- BEGIN HEADER -->
    <div class="page-header navbar navbar-fixed-top" ondblclick="clearCache();">
        <!-- BEGIN HEADER INNER -->
        <div class="page-header-inner ">
            <!-- BEGIN LOGO -->
            <div class="page-logo resize-page-logo">
                <a href="<?= $this->url('home'); ?>">
                    <?php
                    if (isset($config['logo']) && trim($config['logo']) != "" && file_exists(UPLOAD_PATH . DIRECTORY_SEPARATOR . "logo" . DIRECTORY_SEPARATOR . $config['logo'])) { ?>
                        <img src="<?php echo $this->basePath('uploads/logo/' . $config['logo']); ?>" alt="logo" class="logo-default manage-logo-default" style="max-width:32px;max-height:32px;margin-top:-5px;margin-right:5px;" />
                    <?php } else { ?>
                        <img src="<?php echo $this->basePath('assets/layouts/layout/img/logo.png'); ?>" alt="logo" class="logo-default manage-logo-default" style="max-width:32px;max-height:32px;margin-top:-5px;margin-right:5px;margin-left:-10px;" />
                    <?php } ?>
                    <span class="default-logo-text hide-default-text" style="color:#fff;line-height:50px;"><?php echo $this->translate('Smart Connect'); ?></span>
                </a>
                <div class="menu-toggler sidebar-toggler"> </div>
            </div>
            <!-- END LOGO -->
            <!-- BEGIN RESPONSIVE MENU TOGGLER -->
            <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse"> </a>
            <!-- END RESPONSIVE MENU TOGGLER -->
            <!-- BEGIN TOP NAVIGATION MENU -->
            <!-- <span style="color:#ccc;padding:10px;line-height:50px;font-weight:lighter"><?php echo $this->translate('Development/Test Environment with dummy data'); ?></span> -->
            <div class="top-menu">

                <ul class="nav navbar-nav pull-right">

                    <!-- BEGIN USER LOGIN DROPDOWN -->
                    <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->
                    <?php if (isset($loginContainer->showCurrentTablesToggle) && $loginContainer->showCurrentTablesToggle) { ?>
                        <li style="width:200px;margin-top:6px;">
                            <select class="form-control" onchange="changeTable(this);" id="change-table">
                                <option value='current' <?php echo (isset($loginContainer->useCurrentTables) && $loginContainer->useCurrentTables == true) ? "selected" : ""; ?>><?php echo $this->translate("LAST ONE YEAR"); ?></option>
                                <option value='archive' <?php echo (isset($loginContainer->useCurrentTables) && $loginContainer->useCurrentTables == false) ? "selected" : ""; ?>><?php echo $this->translate("FULL DATA"); ?></option>
                            </select>
                        </li>
                    <?php } ?>
                    <li class="dropdown dropdown-user">
                        <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                            <img alt="" class="img-circle" src="<?php echo $this->basePath('assets/img/default-avatar.png'); ?>" />
                            <span class="username username-hide-on-mobile"> <?php echo $loginContainer->name ?> </span>
                            <i class="fa fa-angle-down"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-default">

                            <li>
                                <a href="<?= $this->url('login', array('action' => 'logout')) ?>"><i class="icon-key"></i> <?php echo $this->translate('Log Out'); ?> </a>
                            </li>
                        </ul>

                    </li>

                    <!-- END USER LOGIN DROPDOWN -->

                </ul>
            </div>
            <!-- END TOP NAVIGATION MENU -->
        </div>
        <!-- END HEADER INNER -->
    </div>
    <!-- END HEADER -->
    <!-- BEGIN HEADER & CONTENT DIVIDER -->
    <div class="clearfix"> </div>
    <!-- END HEADER & CONTENT DIVIDER -->
    <!-- BEGIN CONTAINER -->
    <div class="page-container">
        <!-- BEGIN SIDEBAR -->
        <div class="page-sidebar-wrapper">
            <!-- BEGIN SIDEBAR -->
            <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
            <!-- DOC: Change data-auto-speed="200" to adjust the sub menu slide up/down speed -->
            <div class="page-sidebar navbar-collapse collapse">
                <!-- BEGIN SIDEBAR MENU -->
                <!-- DOC: Apply "page-sidebar-menu-light" class right after "page-sidebar-menu" to enable light sidebar menu style(without borders) -->
                <!-- DOC: Apply "page-sidebar-menu-hover-submenu" class right after "page-sidebar-menu" to enable hoverable(hover vs accordion) sub menu mode -->
                <!-- DOC: Apply "page-sidebar-menu-closed" class right after "page-sidebar-menu" to collapse("page-sidebar-closed" class must be applied to the body element) the sidebar sub menu mode -->
                <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
                <!-- DOC: Set data-keep-expand="true" to keep the submenues expanded -->
                <!-- DOC: Set data-auto-speed="200" to adjust the sub menu slide up/down speed -->
                <ul class="page-sidebar-menu page-header-fixed page-sidebar-menu-light page-sidebar-menu-closed" data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200" style="padding-top: 20px">
                    <!-- DOC: To remove the sidebar toggler from the sidebar you just need to completely remove the below "sidebar-toggler-wrapper" LI element -->
                    <li class="sidebar-toggler-wrapper hide">
                        <!-- BEGIN SIDEBAR TOGGLER BUTTON -->
                        <div class="sidebar-toggler"> </div>
                        <!-- END SIDEBAR TOGGLER BUTTON -->
                    </li>
                    <!-- DOC: To remove the search box from the sidebar you just need to completely remove the below "sidebar-search-wrapper" LI element -->
                    <?php $vlRoleCheck = false;
                    if ($loginContainer->role == 1 || $loginContainer->role == 2 || $loginContainer->role == 3 || $loginContainer->role == 5) {
                        $vlRoleCheck = true;
                    }
                    if ($vlRoleCheck && $activeModule['vl']) { ?>
                        <li class="nav-item <?php echo ($activeTab == 'summary' || $activeTab == 'laboratory' || $activeTab == 'clinics') ? " active open " : ""; ?>">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="fa fa-flask"></i>
                                <span class="title"><?php echo $this->translate('Viral Load'); ?></span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">
                                <?php if ($loginContainer->role == 1 || $loginContainer->role == 5) { ?>
                                    <li class="nav-item start <?php echo ($activeTab == 'summary') ? " active open" : ""; ?>">
                                        <a href="<?php echo $this->url('summary', array('action' => 'dashboard')) ?>" class="nav-link ">
                                            <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Summary'); ?></span>
                                        </a>
                                    </li>
                                <?php }
                                if ($loginContainer->role == 1 || $loginContainer->role == 2 || $loginContainer->role == 5) { ?>
                                    <li class="nav-item end <?php echo ($activeTab == 'laboratory') ? " active open" : ""; ?>">
                                        <a href="<?php echo $this->url('laboratory', array('action' => 'dashboard')) ?>" class="nav-link ">
                                            <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Labs Dashboard'); ?></span>
                                        </a>
                                    </li>
                                <?php }
                                if ($loginContainer->role == 1 || $loginContainer->role == 3 || $loginContainer->role == 5) { ?>
                                    <li class="nav-item end <?php echo ($activeTab == 'clinics') ? " active open" : ""; ?>">
                                        <a href="<?php echo $this->url('clinics', array('action' => 'dashboard')) ?>" class="nav-link ">
                                            <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Clinics Dashboard'); ?></span>
                                        </a>
                                    </li>
                                <?php } ?>
                            </ul>
                        </li>
                    <?php } ?>
                    <?php if ($vlRoleCheck && $activeModule['eid']) { ?>
                        <li class="nav-item <?php echo ($activeTab == 'eid-summary' || $activeTab == 'eid-labs' || $activeTab == 'eid-clinics' || $activeTab == 'eid-poc-labs') ? " active open " : ""; ?>">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="fa fa-child"></i>
                                <span class="title"><?php echo $this->translate('EID'); ?></span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">
                                <?php if ($loginContainer->role == 1 || $loginContainer->role == 5) { ?>
                                    <li class="nav-item start <?php echo ($activeTab == 'eid-summary') ? " active open" : ""; ?>">
                                        <a href="<?php echo $this->url('eid-summary', array('action' => 'dashboard')) ?>" class="nav-link ">
                                            <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Summary'); ?></span>
                                        </a>
                                    </li>
                                <?php }
                                if ($loginContainer->role == 1 || $loginContainer->role == 2 || $loginContainer->role == 5) { ?>
                                    <li class="nav-item end <?php echo ($activeTab == 'eid-labs') ? " active open" : ""; ?>">
                                        <a href="<?php echo $this->url('eid-labs', array('action' => 'dashboard')) ?>" class="nav-link ">
                                            <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Labs Dashboard'); ?></span>
                                        </a>
                                    </li>
                                    <?php if (isset($activeModule['poc']) && $activeModule['poc']) { ?>
                                        <li class="nav-item end <?php echo ($activeTab == 'eid-poc-labs') ? " active open" : ""; ?>">
                                            <a href="<?php echo $this->url('eid-labs', array('action' => 'poc-labs-dashboard')) ?>" class="nav-link ">
                                                <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('POC Labs Dashboard'); ?></span>
                                            </a>
                                        </li>
                                    <?php } ?>
                                    <li class="nav-item end <?php echo ($activeTab == 'eid-clinics') ? " active open" : ""; ?>">
                                        <a href="<?php echo $this->url('eid-clinics', array('action' => 'dashboard')) ?>" class="nav-link ">
                                            <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Clinics Dashboard'); ?></span>
                                        </a>
                                    </li>
                                <?php } ?>
                            </ul>
                        </li>
                    <?php } ?>
                    <?php if ($vlRoleCheck && $activeModule['covid19']) { ?>
                        <li class="nav-item <?php echo ($activeTab == 'covid19-summary' || $activeTab == 'covid19-labs') ? " active open " : ""; ?>">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="viruses" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="svg-inline--fa fa-viruses fa-w-20">
                                        <path fill="currentColor" d="M624,352H611.88c-28.51,0-42.79-34.47-22.63-54.63l8.58-8.57a16,16,0,1,0-22.63-22.63l-8.57,8.58C546.47,294.91,512,280.63,512,252.12V240a16,16,0,0,0-32,0v12.12c0,28.51-34.47,42.79-54.63,22.63l-8.57-8.58a16,16,0,0,0-22.63,22.63l8.58,8.57c20.16,20.16,5.88,54.63-22.63,54.63H368a16,16,0,0,0,0,32h12.12c28.51,0,42.79,34.47,22.63,54.63l-8.58,8.57a16,16,0,1,0,22.63,22.63l8.57-8.58c20.16-20.16,54.63-5.88,54.63,22.63V496a16,16,0,0,0,32,0V483.88c0-28.51,34.47-42.79,54.63-22.63l8.57,8.58a16,16,0,1,0,22.63-22.63l-8.58-8.57C569.09,418.47,583.37,384,611.88,384H624a16,16,0,0,0,0-32ZM480,384a32,32,0,1,1,32-32A32,32,0,0,1,480,384ZM346.51,213.33h16.16a21.33,21.33,0,0,0,0-42.66H346.51c-38,0-57.05-46-30.17-72.84l11.43-11.44A21.33,21.33,0,0,0,297.6,56.23L286.17,67.66c-26.88,26.88-72.84,7.85-72.84-30.17V21.33a21.33,21.33,0,0,0-42.66,0V37.49c0,38-46,57.05-72.84,30.17L86.4,56.23A21.33,21.33,0,0,0,56.23,86.39L67.66,97.83c26.88,26.88,7.85,72.84-30.17,72.84H21.33a21.33,21.33,0,0,0,0,42.66H37.49c38,0,57.05,46,30.17,72.84L56.23,297.6A21.33,21.33,0,1,0,86.4,327.77l11.43-11.43c26.88-26.88,72.84-7.85,72.84,30.17v16.16a21.33,21.33,0,0,0,42.66,0V346.51c0-38,46-57.05,72.84-30.17l11.43,11.43a21.33,21.33,0,0,0,30.17-30.17l-11.43-11.43C289.46,259.29,308.49,213.33,346.51,213.33ZM160,192a32,32,0,1,1,32-32A32,32,0,0,1,160,192Zm80,32a16,16,0,1,1,16-16A16,16,0,0,1,240,224Z" class=""></path>
                                    </svg></i>
                                <span class="title"><?php echo $this->translate('Covid 19'); ?></span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">
                                <?php if ($loginContainer->role == 1 || $loginContainer->role == 5) { ?>
                                    <li class="nav-item start <?php echo ($activeTab == 'covid19-summary') ? " active open" : ""; ?>">
                                        <a href="<?php echo $this->url('covid19-summary', array('action' => 'dashboard')) ?>" class="nav-link ">
                                            <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Summary'); ?></span>
                                        </a>
                                    </li>
                                <?php }
                                if ($loginContainer->role == 1 || $loginContainer->role == 2 || $loginContainer->role == 5) { ?>
                                    <li class="nav-item end <?php echo ($activeTab == 'covid19-labs') ? " active open" : ""; ?>">
                                        <a href="<?php echo $this->url('covid19-labs', array('action' => 'dashboard')) ?>" class="nav-link ">
                                            <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Labs Dashboard'); ?></span>
                                        </a>
                                    </li>
                                <?php } ?>
                            </ul>
                        </li>
                    <?php } ?>
                    <?php
                    if ($loginContainer->role == 1 || $loginContainer->role == 4) { ?>
                        <!--<li class="nav-item < ?php echo ($activeTab == 'hubs-dashboard' ? " active open " : ""); ?>">
                                 <a href="/hubs/dashboard" class="nav-link nav-toggle">
                                     <i class="icon-home"></i>
                                     <span class="title">< ?php echo $this->translate('Hubs Dashboard'); ?></span>
                                     <span class="selected"></span>
                                 </a>

                            </li>-->
                    <?php } ?>
                    <?php if ($loginContainer->role == 1 || $loginContainer->role == 5) { ?>
                        <li class="nav-item <?php echo ($activeTab == 'duplicate-data') ? " active open " : ""; ?>">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="icon-briefcase"></i>
                                <span class="title"><?php echo $this->translate('Data Management'); ?></span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">
                                <li class="nav-item start <?php echo ($activeTab == 'duplicate-data') ? " active open" : ""; ?>">
                                    <a href="<?php echo $this->url('duplicate-data') ?>" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Duplicate Data'); ?></span>
                                    </a>
                                </li>
                                <li class="nav-item start">
                                    <a href="<?php echo $this->url('snapshot', array('action' => 'index')) ?>" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Snapshot'); ?></span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                    <?php } ?>

                    <?php
                    if ($loginContainer->role == 1) { ?>
                        <li class="nav-item <?php echo ($activeTab == 'config' || $activeTab == 'users' || $activeTab == 'facility' || $activeTab == 'import') ? " active open " : ""; ?>">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="icon-equalizer"></i>
                                <span class="title"><?php echo $this->translate('Admin'); ?></span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">
                                <li class="nav-item start <?php echo ($activeTab == 'config') ? " active open" : ""; ?>">
                                    <a href="<?php echo $this->url('config', array('action' => 'index')) ?>" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Global Config'); ?></span>
                                    </a>
                                </li>
                                <li class="nav-item end <?php echo ($activeTab == 'users') ? " active open" : ""; ?>">
                                    <a href="<?php echo $this->url('users', array('action' => 'index')) ?>" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Users'); ?></span>
                                    </a>
                                </li>
                                <li class="nav-item end <?php echo ($activeTab == 'facility') ? " active open" : ""; ?>">
                                    <a href="<?php echo $this->url('facility', array('action' => 'index')) ?>" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Facilities'); ?></span>
                                    </a>
                                </li>
                                <!-- <li class="nav-item end <?php echo ($activeTab == 'status') ? " active open" : ""; ?>">
                                    <a href="<?php echo $this->url('status', array('action' => 'index')) ?>" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Status'); ?></span>
                                    </a>
                                </li> -->
                                <li class="nav-item end <?php echo ($activeTab == 'status') ? " active open" : ""; ?>">
                                    <a href="<?php echo $this->url('sync-status', array('action' => 'index')) ?>" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('Sync Status'); ?></span>
                                    </a>
                                </li>
                                <li class="nav-item end <?php echo ($activeTab == 'sync-history') ? " active open" : ""; ?>">
                                    <a href="<?php echo $this->url('api-sync-history', array('action' => 'index')) ?>" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title"><?php echo $this->translate('API History'); ?></span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                    <?php } ?>
                    <!--
                        <li class="nav-item < ?php echo ($activeTab == 'vl-request' ? " active open " : ""); ?> ">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="icon-settings"></i>
                                <span class="title">VL Request</span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">
                                <li class="nav-item  < ?php echo (isset($activeMenu) && $activeMenu == 'vl-request' ? " active open " : ""); ?>  ">
                                    <a href="/vl-request/import-file" class="nav-link ">
                                      <i class="fa fa-angle-right"></i>   <span class="title">Import Excel</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        -->
                    <?php if (isset($loginContainer->accessType) && $loginContainer->accessType == '4') { ?>

                        <li class="nav-item <?php echo ($activeTab == 'admin' ? " active open " : ""); ?> ">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="icon-settings"></i>
                                <span class="title">Admin</span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">

                                <li class="nav-item  <?php echo ($activeMenu == 'organizations' ? " active open " : ""); ?>  ">
                                    <a href="/organizations" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title">Manage Facilities</span>
                                    </a>
                                </li>
                                <li class="nav-item  <?php echo ($activeMenu == 'users' ? " active open " : ""); ?>  ">
                                    <a href="/users" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title">Manage Users</span>
                                    </a>
                                </li>
                                <li class="nav-item  <?php echo ($activeMenu == 'config-email' ? " active open " : ""); ?>  ">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title">Configure Email</span>
                                    </a>
                                </li>
                                <li class="nav-item  <?php echo ($activeMenu == 'config-sms' ? " active open " : ""); ?>  ">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title">Configure SMS</span>
                                    </a>
                                </li>
                                <li class="nav-item  <?php echo ($activeMenu == 'config-general' ? " active open " : ""); ?>  ">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title">General Config</span>
                                    </a>
                                </li>
                                <li class="nav-item  <?php echo ($activeMenu == 'source' ? " active open " : ""); ?>  ">
                                    <a href="<?php echo $this->url('source', array('action' => 'index')); ?>" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title">Sources</span>
                                    </a>
                                </li>
                            </ul>
                        </li>

                    <?php } ?>
                    <?php if (isset($loginContainer->accessType) && ($loginContainer->accessType == '1' || $loginContainer->accessType == '4')) { ?>
                        <li class="nav-item <?php echo ($activeTab == 'clinic' ? " active open " : ""); ?> ">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="icon-settings"></i>
                                <span class="title">Clinic</span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">

                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title">VL Test Request</span>
                                    </a>
                                </li>
                                <!-- <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <span class="title">Create Batch</span>
                                    </a>
                                </li> -->
                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title">Sample Shipment</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-print"></i> <span class="title">Print VL Test Results</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-marker"></i> <span class="title">VL Sample Tracking</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-mobile" style="font-size:23px;color:red;"></i> <span class="title">Send Results</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title">User Information</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                    <?php } ?>
                    <?php if (isset($loginContainer->accessType) && ($loginContainer->accessType == '2' || $loginContainer->accessType == '4')) { ?>
                        <li class="nav-item <?php echo ($activeTab == 'clinic' ? " active open " : ""); ?> ">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="icon-settings"></i>
                                <span class="title">Hub</span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">

                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title">VL Test Request</span>
                                    </a>
                                </li>
                                <!-- <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <span class="title">Create Batch</span>
                                    </a>
                                </li> -->
                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title">Sample Shipment</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-print"></i> <span class="title">Print VL Test Results</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-marker"></i> <span class="title">VL Sample Tracking</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title">User Information</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                    <?php } ?>
                    <?php if (isset($loginContainer->accessType) && ($loginContainer->accessType == '3' || $loginContainer->accessType == '4')) { ?>
                        <li class="nav-item <?php echo ($activeTab == 'laboratory' ? " active open " : ""); ?> ">
                            <a href="javascript:;" class="nav-link nav-toggle">
                                <i class="icon-settings"></i>
                                <span class="title">Laboratory</span>
                                <span class="arrow"></span>
                            </a>
                            <ul class="sub-menu">
                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title"> VL Test Request</span>
                                    </a>
                                </li>

                                <!-- <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <span class="title">Batch Creation</span>
                                    </a>
                                </li> -->
                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-print"></i> <span class="title">Print VL Test Results</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-marker"></i> <span class="title">VL Sample Tracking</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-mobile" style="font-size:23px;color:red;"></i> <span class="title">Send Results</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:;" class="nav-link ">
                                        <i class="fa fa-angle-right"></i> <span class="title">User Information</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                    <?php } ?>
                </ul>
                <!-- END SIDEBAR MENU -->
                <!-- END SIDEBAR MENU -->
            </div>
            <!-- END SIDEBAR -->
        </div>
        <!-- END SIDEBAR -->
        <!-- BEGIN CONTENT -->
        <div class="page-content-wrapper">
            <!-- BEGIN CONTENT BODY -->
            <div class="page-content">
                <!-- BEGIN PAGE HEADER-->

                <?php echo $this->content; ?>


            </div>
            <!-- END CONTENT BODY -->
        </div>

        <!-- END CONTENT -->
    </div>
    <!-- END CONTAINER -->
    <!-- BEGIN FOOTER -->
    <div class="page-footer">
        <div class="page-footer-inner" style="width:100%;font-size:1em;">



            <a href="javascript:void(0);" onclick="clearCache();" style="font-size:8px;cursor:pointer;color:#fff;">Clear Cache</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<?php echo $this->translate('Funded by'); ?>
            <a href="https://www.taskforce.org/" style="color:#ccc;text-decoration:underline;"><?php echo $this->translate('The Task Force for Global Health'); ?></a> &
            <a href="https://www.emory.edu/home/index.html" style="color:#ccc;text-decoration:underline;"><?php echo $this->translate('Emory University / PEPFAR'); ?></a> | ver. <?php echo APP_VERSION; ?>
        </div>
        <div class="scroll-to-top">
            <i class="icon-arrow-up"></i>
        </div>
    </div>

    <!-- END FOOTER -->
    <!--[if lt IE 9]>
            <script src="<?php echo $this->basePath('assets/global/plugins/respond.min.js'); ?>"></script>
            <script src="<?php echo $this->basePath('assets/global/plugins/excanvas.min.js'); ?>"></script>
        <![endif]-->
    <!-- BEGIN CORE PLUGINS -->
    <script src="<?php echo $this->basePath('assets/js/highcharts.js'); ?>"></script>
    <script src="https://code.highcharts.com/8.1.2/modules/drilldown.js"></script>
    <script src="<?php echo $this->basePath('assets/js/highcharts-exporting.js'); ?>"></script>
    <script src="<?php echo $this->basePath('assets/js/highcharts-offline-exporting.js'); ?>"></script>
    <script src="<?php echo $this->basePath('assets/js/highcharts-export-csv.js'); ?>"></script>
    <script src="<?php echo $this->basePath('assets/global/scripts/highcharts-watermark.js'); ?>"></script>
    <script src="<?php echo $this->basePath('assets/global/scripts/deforayModal.js'); ?>"></script>

    <script src="<?php echo $this->basePath('assets/global/plugins/bootstrap/js/bootstrap.min.js'); ?>" type="text/javascript"></script>
    <script src="<?php echo $this->basePath('assets/global/plugins/js.cookie.min.js'); ?>" type="text/javascript"></script>
    <script src="<?php echo $this->basePath('assets/global/plugins/jquery.blockui.min.js'); ?>" type="text/javascript"></script>

    <!-- END CORE PLUGINS -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <script src="<?php echo $this->basePath('assets/global/plugins/moment.min.js'); ?>" type="text/javascript"></script>
    <script src="<?php echo $this->basePath('assets/global/plugins/bootstrap-daterangepicker/daterangepicker.js'); ?>" type="text/javascript"></script>

    <script src="<?php echo $this->basePath('assets/global/plugins/counterup/jquery.waypoints.min.js'); ?>" type="text/javascript"></script>
    <script src="<?php echo $this->basePath('assets/global/plugins/counterup/jquery.counterup.min.js'); ?>" type="text/javascript"></script>



    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN THEME GLOBAL SCRIPTS -->
    <script src="<?php echo $this->basePath('assets/global/scripts/app.min.js'); ?>" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/v/bs/jszip-3.10.1/dt-1.13.8/af-2.6.0/b-2.4.2/b-colvis-2.4.2/b-html5-2.4.2/b-print-2.4.2/cr-1.7.0/fc-4.3.0/fh-3.4.0/r-2.5.0/rr-1.4.1/sc-2.3.0/datatables.min.js"></script>


    <script src="<?php echo $this->basePath('assets/global/plugins/select2/js/select2.min.js'); ?>" type="text/javascript"></script>
    <script src="<?php echo $this->basePath('assets/js/jasny-bootstrap.min.js'); ?>" type="text/javascript"></script>
    <!-- END THEME GLOBAL SCRIPTS -->
    <!-- BEGIN PAGE LEVEL SCRIPTS -->

    <!-- END PAGE LEVEL SCRIPTS -->
    <!-- BEGIN THEME LAYOUT SCRIPTS -->
    <script src="<?php echo $this->basePath('assets/layouts/layout/scripts/layout.min.js'); ?>" type="text/javascript"></script>
    <script src="<?php echo $this->basePath('assets/js/deforayValidation.js'); ?>" type="text/javascript"></script>
    <script src="<?php echo $this->basePath('assets/js/cookie.js'); ?>" type="text/javascript"></script>
    <script src="<?php echo $this->basePath('assets/js/month-year-range-picker.php'); ?>" type="text/javascript"></script>
    <!-- END THEME LAYOUT SCRIPTS -->

    <script src="<?php echo $this->basePath('assets/bootstrap-toggle/bootstrap-toggle.min.js'); ?>"></script>
    <!-- page script -->
    <div id="dDiv" class="dialog ">
        <div style="text-align:center"><span onclick="closeModal();" style="float:right;clear:both;" class="closeModal"></span></div>
        <iframe id="dFrame" src="" style="border:none;" scrolling='yes' marginwidth='0' marginheight='0' frameborder='0' vspace='0' hspace='0'>some problem</iframe>
    </div>
    <script>
        $(function() {
            <?php
            if (isset($container->alertMsg) && $container->alertMsg != "") {
            ?>
                alert("<?php echo $this->translate($container->alertMsg); ?>");
            <?php
                $container->alertMsg = "";
                unset($container->alertMsg);
            }
            ?>
        });

        $(document).ready(function() {
            $("body").on("contextmenu", function(e) {
                //return false;
            });
        });

        $('body').on('click', '.sidebar-toggler', function(e) {
            var body = $('body');
            if (body.hasClass("page-sidebar-closed")) {
                $('.page-logo').removeClass('resize-page-logo');
                $('.page-logo').css('width', '235px !important');
                $('.default-logo-text').removeClass('hide-default-text');
                $('.logo-default').removeClass('manage-logo-default');
            } else {
                $('.page-logo').addClass('resize-page-logo');
                $('.page-logo').css('width', 'auto !important');
                $('.default-logo-text').addClass('hide-default-text');
                $('.logo-default').addClass('manage-logo-default');
            }
        });

        $(document).ajaxStop(function() {
            setTimeout(showAnnouncementMsg, 2000);
        });

        function showAnnouncementMsg() {
            if (document.cookie.indexOf("msg_on") == -1 || getCookie('msg_on') == '') {
                <?php if (isset($config['announcement_msg']) && trim($config['announcement_msg']) != '') { ?>
                    alert('<?php echo ucfirst($config['announcement_msg']); ?>');
                    setCookie('msg_on', 1);
                <?php } ?>
            }
        }

        function clearCache() {
            $.blockUI.defaults.css.border = '1px solid grey';
            $(document).ajaxStart($.blockUI({
                message: '<h2><?php echo $this->translate('Processing...'); ?></h2>'
            })).ajaxStop($.unblockUI);
            $.post("<?php echo $this->url('common', array('action' => 'clear-cache')); ?>", {},
                function(data) {
                    //The parameter set to 'true' reloads a fresh copy from the server. Leaving it out will serve the page from cache.
                    window.location.reload(true);
                });
        }

        //only visible legends export
        Highcharts.wrap(Highcharts.Chart.prototype, 'init', function(proceed, options, callback) {
            if (options.chart && options.chart.forExport && options.series) {
                $.each(options.series, function() {
                    if (this.visible === false) {
                        this.showInLegend = false;
                    }
                });
            }
            return proceed.call(this, options, callback);
        });

        //watermark text default configuration
        Highcharts.setOptions({
            watermark: {
                text: '<?php echo (isset($config['watermark_text']) && trim($config['watermark_text']) != '') ? $this->translate($config['watermark_text']) : ''; ?>',
                width: 60,
                height: 0
            }
        });

        jQuery(".checkNum").keydown(function(e) {
            // Allow: backspace, delete, tab, escape, enter and .
            if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 ||
                // Allow: Ctrl+A
                (e.keyCode == 65 && e.ctrlKey === true) ||
                // Allow: home, end, left, right
                (e.keyCode >= 35 && e.keyCode <= 39)) {
                // let it happen, don't do anything
                return;
            }
            // Ensure that it is a number and stop the keypress
            if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                e.preventDefault();
            }
        });

        function showModal(url, w, h) {
            showdefModal('dDiv', w, h);
            document.getElementById('dFrame').style.height = h + 'px';
            document.getElementById('dFrame').style.width = w + 'px';
            document.getElementById('dFrame').src = url;
        }

        function closeModal() {
            document.getElementById('dFrame').src = '';
            hidedefModal('dDiv');
        }

        function changeTable(obj) {

            $.post("<?php echo $this->url('common', array('action' => 'set-session')); ?>", {
                    sessionType: obj.value
                },
                function(data) {
                    window.location.reload(true);
                });
        }
    </script>
</body>

</html>
